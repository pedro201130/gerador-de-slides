<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Slides com Foto</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    :root {
      --bg-page: #020617;
      --bg-card: #020617;
      --bg-panel: #020617;
      --border-soft: #1f2937;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --chip-bg: #0f172a;
    }

    * {
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      margin: 0;
      padding: 32px 16px;
      background: radial-gradient(circle at top, #0b1120 0, #020617 45%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(145deg, rgba(15,23,42,0.9), rgba(15,23,42,0.98));
      border-radius: 24px;
      border: 1px solid rgba(148,163,184,0.25);
      padding: 24px 24px 28px;
      box-shadow:
        0 24px 60px rgba(0,0,0,0.75),
        0 0 0 1px rgba(15,23,42,0.9) inset;
      backdrop-filter: blur(16px);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 24px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    h1 {
      font-size: 24px;
      margin: 0;
      font-weight: 700;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-subtitle {
      font-size: 13px;
      color: var(--text-muted);
    }

    .tag-badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.35);
      background: rgba(15,23,42,0.9);
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 10px rgba(34,197,94,0.8);
    }

    .config {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 20px;
      margin-bottom: 24px;
    }

    .panel {
      background: radial-gradient(circle at top left, rgba(30,64,175,0.18), rgba(15,23,42,0.95));
      border-radius: 18px;
      border: 1px solid rgba(31,41,55,0.9);
      padding: 16px 16px 18px;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.7),
        0 0 0 1px rgba(15,23,42,0.7) inset;
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(34,197,94,0.08), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .panel-inner {
      position: relative;
      z-index: 1;
    }

    .panel-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .panel-title span {
      width: 22px;
      height: 1px;
      background: rgba(148,163,184,0.45);
      border-radius: 999px;
    }

    .panel-helper {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    textarea {
      width: 100%;
      min-height: 220px;
      padding: 12px 12px 10px;
      border-radius: 12px;
      border: 1px solid rgba(55,65,81,0.9);
      resize: vertical;
      font-size: 13px;
      background: rgba(15,23,42,0.98);
      color: var(--text-main);
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34,197,94,0.4), 0 0 0 8px rgba(34,197,94,0.08);
      background: #020617;
    }

    label {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-muted);
      display: block;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .field-row {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
      gap: 8px;
    }

    input[type="text"],
    input[type="number"],
    input[type="file"],
    input[type="color"] {
      width: 100%;
      padding: 9px 10px;
      border-radius: 999px;
      border: 1px solid rgba(55,65,81,0.9);
      font-size: 13px;
      margin-top: 0;
      background: rgba(15,23,42,0.98);
      color: var(--text-main);
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease, transform 0.08s ease;
    }

    input[type="color"] {
      padding: 2px;
      height: 36px;
      border-radius: 999px;
      cursor: pointer;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    input[type="file"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34,197,94,0.3);
      background: #020617;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 13px;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      letter-spacing: 0.02em;
      transition: transform 0.08s ease, box-shadow 0.18s ease, background 0.18s ease, color 0.18s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: var(--accent);
      color: #00110a;
      box-shadow:
        0 10px 30px rgba(34,197,94,0.3),
        0 0 0 1px rgba(21,128,61,0.7) inset;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow:
        0 14px 40px rgba(34,197,94,0.4),
        0 0 0 1px rgba(21,128,61,0.9) inset;
      background: #22c55e;
    }

    .btn-secondary {
      background: rgba(15,23,42,0.95);
      color: var(--text-main);
      border: 1px solid rgba(55,65,81,0.9);
      box-shadow: 0 10px 25px rgba(0,0,0,0.6);
    }

    .btn-secondary:hover {
      transform: translateY(-1px);
      background: rgba(15,23,42,1);
      border-color: rgba(148,163,184,0.9);
    }

    .actions-row {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    #downloadAllBtn {
      display: none;
      margin-top: 0;
    }

    .slides-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      margin-top: 4px;
    }

    .slides-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .slides-title span {
      width: 18px;
      height: 1px;
      background: rgba(148,163,184,0.4);
      border-radius: 999px;
    }

    .slides-count {
      font-size: 11px;
      color: var(--text-muted);
      background: var(--chip-bg);
      border-radius: 999px;
      padding: 3px 9px;
      border: 1px solid rgba(75,85,99,0.8);
    }

    .slides-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      margin-top: 8px;
      padding-top: 6px;
      border-top: 1px dashed rgba(75,85,99,0.8);
    }

    .slide-frame {
      position: relative;
      width: 324px;
      height: 405px;
      background: #fff;
      color: #000;
      border-radius: 18px;
      background-clip: padding-box;
      overflow: visible;
      padding: 24px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow:
        0 12px 30px rgba(0,0,0,0.7),
        0 0 0 1px rgba(15,23,42,0.16);
      transform-origin: center;
      transition: transform 0.12s ease, box-shadow 0.18s ease;
    }

    .slide-frame:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.8),
        0 0 0 1px rgba(15,23,42,0.28);
    }

    .slide-index-badge {
      position: absolute; top: 12px; right: 12px;
      font-size: 10px;
      background: #020617;
      color: #e5e7eb;
      padding: 5px 8px;
      border-radius: 999px;
      font-weight: 700;
      letter-spacing: 0.06em;
      border: 1px solid rgba(148,163,184,0.6);
    }

    .slide-header {
      display: flex; align-items: center; gap: 10px;
    }

    .profile-img {
      width: 34px; height: 34px;
      border-radius: 50%; object-fit: cover;
      background: #e5e7eb;
      border: 3px solid currentColor;
      box-shadow: 0 0 0 1px rgba(148,163,184,0.7);
    }

    .slide-main-text {
      font-weight: 800;
      line-height: 1.25;
      flex: 1;
      width: 100%;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      text-align: left;
      padding: 0 4px;
    }

    .slide-main-text p {
      margin: 0;
      width: 100%;
      white-space: normal;
      word-break: break-word;
      overflow-wrap: break-word;
    }

    .slide-footer {
      font-weight: 700;
      font-size: 16px;
      min-height: 20px;
    }

    /* Botão de baixar apenas 1 slide */
    .single-download {
      margin-top: 6px;
      padding: 6px 12px;
      font-size: 11px;
    }

    @media (max-width: 960px) {
      .config {
        grid-template-columns: minmax(0, 1fr);
      }

      .app {
        padding: 18px 16px 24px;
      }

      .slides-wrapper {
        justify-content: center;
      }
    }

    @media (max-width: 640px) {
      body {
        padding: 16px 8px;
      }

      h1 {
        font-size: 20px;
      }

      .panel {
        padding: 14px 12px 16px;
      }

      textarea {
        min-height: 190px;
      }
    }
  </style>
</head>
<body>

  <div class="app">

    <div class="app-header">
      <div class="app-title-block">
        <h1>
          Gerador de Slides
        </h1>
        <p class="app-subtitle">
          Cole o texto, ajuste os detalhes e baixe seu carrossel pronto para o Instagram.
        </p>
      </div>
      <div class="tag-badge">
        <span class="tag-dot"></span>
        Ferramenta rápida
      </div>
    </div>

    <div class="config">

      <!-- PAINEL ESQUERDO -->
      <div class="panel">
        <div class="panel-inner">
          <div class="panel-title">
            <span></span>
            Conteúdo dos slides
          </div>
          <p class="panel-helper">
            Cada linha será transformada em um slide. Máximo de 10 slides por vez.
          </p>

          <label>Textos dos slides (1 por linha)</label>
          <textarea id="slidesText" placeholder="Slide 1&#10;Slide 2&#10;Slide 3... (máx. 10)"></textarea>

          <div class="actions-row">
            <button class="btn-primary" id="generateBtn">
              ▶ Gerar Slides
            </button>

            <button class="btn-secondary" id="downloadAllBtn">
              ⬇ Baixar TODOS
            </button>
          </div>
        </div>
      </div>

      <!-- PAINEL DIREITO -->
      <div class="panel">
        <div class="panel-inner">
          <div class="panel-title">
            <span></span>
            Aparência
          </div>
          <p class="panel-helper">
            Ajuste informações do cabeçalho, rodapé, cores e tipografia dos slides.
          </p>

          <label>@ Perfil</label>
          <input id="profileName" type="text" placeholder="@seu.perfil">

          <label>Nome</label>
          <input id="authorName" type="text" placeholder="Seu nome">

          <label>Rodapé</label>
          <input id="footerText" type="text" value="Segue →">

          <div class="field-row">
            <div>
              <label>Tamanho da Fonte</label>
              <input id="fontSize" type="number" value="22">
            </div>
            <div>
              <label>Cor da Fonte</label>
              <input id="fontColor" type="color" value="#000000">
            </div>
          </div>

          <!-- NOVOS CAMPOS: tamanho do @ e do nome -->
          <div class="field-row">
            <div>
              <label>Tam. @ Perfil</label>
              <input id="profileFontSize" type="number" value="13">
            </div>
            <div>
              <label>Tam. Nome</label>
              <input id="authorFontSize" type="number" value="11">
            </div>
          </div>

          <label>Cor do Fundo do Slide</label>
          <input id="bgColor" type="color" value="#000000">

          <label>Foto (círculo)</label>
          <input id="profileImage" type="file" accept="image/*">
        </div>
      </div>

    </div>

    <div class="slides-header">
      <div class="slides-title">
        <span></span>
        Pré-visualização
      </div>
      <div class="slides-count" id="slidesCountInfo">
        Nenhum slide gerado ainda
      </div>
    </div>

    <div class="slides-wrapper" id="slidesContainer"></div>

  </div>

  <script>
    let uploadedImageURL = "";

    document.getElementById('profileImage').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) uploadedImageURL = URL.createObjectURL(file);
    });

    // Agora recebe também profileFontSize e authorFontSize
    function createSlide(
      text,
      index,
      totalSlides,
      profile,
      author,
      footer,
      fontSize,
      fontColor,
      bgColor,
      profileFontSize,
      authorFontSize
    ) {
      const wrapper = document.createElement('div');

      const slide = document.createElement('div');
      slide.className = 'slide-frame';
      slide.style.backgroundColor = bgColor;
      slide.style.color = fontColor;

      const badge = document.createElement('div');
      badge.className = 'slide-index-badge';
      badge.textContent = `${index + 1}/${totalSlides}`;
      slide.appendChild(badge);

      const header = document.createElement('div');
      header.className = 'slide-header';

      const img = document.createElement('img');
      img.className = 'profile-img';
      img.src = uploadedImageURL || "";
      img.style.borderColor = fontColor;

      header.appendChild(img);

      const textBox = document.createElement('div');
      const p1 = document.createElement('div');
      p1.textContent = profile;
      p1.style.fontWeight = "700";
      p1.style.fontSize = profileFontSize + "px";

      const p2 = document.createElement('div');
      p2.textContent = author;
      p2.style.fontWeight = "500";
      p2.style.fontSize = authorFontSize + "px";

      textBox.appendChild(p1);
      textBox.appendChild(p2);

      header.appendChild(textBox);

      const main = document.createElement('div');
      main.className = 'slide-main-text';
      main.style.fontSize = fontSize + "px";

      const p = document.createElement('p');
      p.textContent = text;

      main.appendChild(p);

      const footerBox = document.createElement('div');
      footerBox.className = 'slide-footer';

      if (!(totalSlides === 10 && index === totalSlides - 1)) {
        footerBox.textContent = footer;
      }

      slide.appendChild(header);
      slide.appendChild(main);
      slide.appendChild(footerBox);

      wrapper.appendChild(slide);

      // NOVO: botão para baixar apenas este slide
      const singleBtn = document.createElement('button');
      singleBtn.className = 'btn-secondary single-download';
      singleBtn.textContent = '⬇ Baixar este';
      singleBtn.addEventListener('click', () => {
        downloadSlide(slide, index);
      });
      wrapper.appendChild(singleBtn);

      return wrapper;
    }

    function downloadSlide(element, index) {
      return html2canvas(element, {
        scale: 3,
        backgroundColor: "#000000"
      }).then(canvas => {
        const link = document.createElement('a');
        link.download = `slide-${index + 1}.png`;
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }

    document.getElementById('generateBtn').addEventListener('click', function() {
      const slidesContainer = document.getElementById('slidesContainer');
      slidesContainer.innerHTML = "";

      const rawLines = document.getElementById('slidesText').value
        .split("\n").map(t => t.trim()).filter(t => t !== "");

      if (rawLines.length === 0) {
        alert("Digite pelo menos 1 slide.");
        return;
      }

      let lines = rawLines.slice(0, 10);

      const profile   = document.getElementById('profileName').value;
      const author    = document.getElementById('authorName').value;
      const footer    = document.getElementById('footerText').value;
      const fontSize  = document.getElementById('fontSize').value;
      const fontColor = document.getElementById('fontColor').value;
      const bgColor   = document.getElementById('bgColor').value;

      // Novos tamanhos
      const profileFontSize = document.getElementById('profileFontSize').value || "13";
      const authorFontSize  = document.getElementById('authorFontSize').value || "11";

      const totalSlides = lines.length;

      lines.forEach((line, i) => {
        const slideEl = createSlide(
          line,
          i,
          totalSlides,
          profile,
          author,
          footer,
          fontSize,
          fontColor,
          bgColor,
          profileFontSize,
          authorFontSize
        );
        slidesContainer.appendChild(slideEl);
      });

      document.getElementById('downloadAllBtn').style.display = "inline-flex";

      const info = document.getElementById('slidesCountInfo');
      info.textContent = `${totalSlides} slide${totalSlides > 1 ? 's' : ''} gerado${totalSlides > 1 ? 's' : ''}`;
    });

    document.getElementById('downloadAllBtn').addEventListener('click', async function() {
      const frames = document.querySelectorAll('.slide-frame');
      for (let i = 0; i < frames.length; i++) await downloadSlide(frames[i], i);
      alert("Todos os slides foram baixados!");
    });
  </script>

</body>
</html>
